(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{418:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("介绍")]),s._v(" "),t("p",[s._v("μC/OSIII的移植,任务的创建和切换")])]),s._v(" "),t("h1",{attrs:{id:"μc-osiii的移植"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#μc-osiii的移植"}},[s._v("#")]),s._v(" μC/OSIII的移植")]),s._v(" "),t("h2",{attrs:{id:"cortex-m3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cortex-m3"}},[s._v("#")]),s._v(" Cortex-M3")]),s._v(" "),t("h3",{attrs:{id:"工程的创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工程的创建"}},[s._v("#")]),s._v(" 工程的创建")]),s._v(" "),t("p",[s._v("ps:作为一名拥有良好习惯的开发者，我们的工程模板文件不应直接去照搬别人的,或是无脑按照别人的文件结构来创建.我们需要了解自己文件的特点及分类情况,也要清楚μC/OS源码每个文件的作用,这样我们自己创建的工程文件的层次可以更加分明,结构更加合理.")]),s._v(" "),t("p",[s._v("我的文件结构:")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[s._v("Project\n    USER\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c\t\t\t存放mian函数\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c\t\t\t存放任务函数\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("includes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h\t\t存放各种头文件\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h\t\t\t存放任务控制块等重要参数\n    BSP\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("bsp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c\t\t\t存放BSP_Init和BSP_CPU_ClkFreq等函数\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("bsp_xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c\t\t底层外设代码\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    CMSIS\t\t\t\tSTM32CORE代码\n    Device\t\t\t\t启动文件和固件库代码\n    RTOS\t\t\t\tμC"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("OS源码以及xx_cfg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h文件\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("ps:我是用的是keil软件pack包中的环境")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("文件说明")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("os.h")]),s._v(" "),t("p",[s._v("包含μC/OS的主要头文件,定义了一些与系统相关的宏定义,常量,全局变量,函数原型等.")])]),s._v(" "),t("li",[t("p",[s._v("os_cfg.h")]),s._v(" "),t("p",[s._v("系统的配置文件,主要是让用户自己配置一些系统默认的功能,用户可以选择某些或者全部的功能,比如消息队列,信号量,互斥量,事件标志位等,系统默认全部使用的,如果用户不需要的话,则可以直接关闭,在对应的宏定义中设置为0即可,这样子就不会占用系统的SRAM,以节省系统资源.")])]),s._v(" "),t("li",[t("p",[s._v("cpu_cfg.h")]),s._v(" "),t("p",[s._v("主要是配置CPU相关的一些宏定义,我们可以选择对不同的CPU进行配置,当然如果我们没有对CPU很熟悉的话,就直接忽略这个文件即可.")])]),s._v(" "),t("li",[t("p",[s._v("os_cfg_app.c")]),s._v(" "),t("p",[s._v("根据os_cfg_app.h中的配置来定义变量和数组.")])]),s._v(" "),t("li",[t("p",[s._v("os_core.c")]),s._v(" "),t("p",[s._v("内核数据结构管理,μC/OS的核心,任务切换等等.")])]),s._v(" "),t("li",[t("p",[s._v("os_dbg.c")]),s._v(" "),t("p",[s._v("μC/OS内核调试相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_flag.c")]),s._v(" "),t("p",[s._v("时间块管理,事件标志组管理等相关功能代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_int.c")]),s._v(" "),t("p",[s._v("涵盖内核的初始化相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_mem.c")]),s._v(" "),t("p",[s._v("系统内存管理相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_msg.c")]),s._v(" "),t("p",[s._v("消息处理相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_mutex.c")]),s._v(" "),t("p",[s._v("互斥量相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_pend_multi.c")]),s._v(" "),t("p",[s._v("在多个消息队列,信号量等待的相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_prio.c")]),s._v(" "),t("p",[s._v("这是一个内部调用的文件,关于系统就绪相关的代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_q.c")]),s._v(" "),t("p",[s._v("消息队列相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_sem.c")]),s._v(" "),t("p",[s._v("信号量相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_stat.c")]),s._v(" "),t("p",[s._v("任务状态统计相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_task.c")]),s._v(" "),t("p",[s._v("任务管理相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_tick.c")]),s._v(" "),t("p",[s._v("处理任务相关延时,阻塞状态任务的相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_time.c")]),s._v(" "),t("p",[s._v("时间管理相关代码,阻塞延时等.")])]),s._v(" "),t("li",[t("p",[s._v("os_tmr.c")]),s._v(" "),t("p",[s._v("软件定时器相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("os_var.c")]),s._v(" "),t("p",[s._v("μC/OS定义的全局变量.")])]),s._v(" "),t("li",[t("p",[s._v("os_type.h")]),s._v(" "),t("p",[s._v("μC/OS数据类型声明相关代码.")])]),s._v(" "),t("li",[t("p",[s._v("app_cfg.h")]),s._v(" "),t("p",[s._v("存放宏定义,任务栈的宏定义要存放在里面.")])]),s._v(" "),t("li",[t("p",[s._v("os_cpu.h")]),s._v(" "),t("p",[s._v("定义数据类型,处理器相关代码,声明函数原型.")])]),s._v(" "),t("li",[t("p",[s._v("oc_cpu_a.asm")]),s._v(" "),t("p",[s._v("与处理器相关的汇编代码,主要是与任务切换相关.")])]),s._v(" "),t("li",[t("p",[s._v("os_cpu_c.c")]),s._v(" "),t("p",[s._v("定义用户钩子函数,提供扩充软件功能的的接口.")])]),s._v(" "),t("li",[t("p",[s._v("cpu.h存放有CPU_XX数据类型")])]),s._v(" "),t("li",[t("p",[s._v("cpu_c.h")]),s._v(" "),t("p",[s._v("包含了一些数据类型的定义,让μC/OSIII与CPU架构和编译器的字宽无关.同时还指定了CPU使用的是大端模式还是小端模式,还包括一些与 CPU 架构相关的函数的声明.")])]),s._v(" "),t("li",[t("p",[s._v("cpu_c.c/cpu_a.asm")]),s._v(" "),t("p",[s._v("这两个文件主要是 CPU 底层相关的一些 CPU 函数,cpu_c.c 文件中放的是 C 函数,包含了一些")]),s._v(" "),t("p",[s._v("CPU架构相关的代码,μC/OS为了移植方便而采用C语言编写;而cpu_a.asm存放的是汇编代码,有一些代码只能用汇编实现,包含一些用来开关中断,前导零指令等.")])]),s._v(" "),t("li",[t("p",[s._v("cpu_core.c")]),s._v(" "),t("p",[s._v("包含了适用于所有的CPU架构的C代码(通用代码),是一个很重要的文件.主要包含的函数是CPU名字的命名,时间戳的计算等等,跟CPU底层的移植没有太大的关系,主要保留的是CPU前导零的C语言计算函数以及一些其他的函数,因为前导零指令是依靠硬件实现的,这里采用C语言方式实现,以防止某些CPU不支持前导零指令.")])]),s._v(" "),t("li",[t("p",[s._v("cpu_core.h")]),s._v(" "),t("p",[s._v("主要是对cpu_core.c文件里面一些函数的说明,以及一些时间戳相关等待定义.")])]),s._v(" "),t("li",[t("p",[s._v("cpu_def.h")]),s._v(" "),t("p",[s._v("包含CPU相关的一些宏定义,常量,利用"),t("code",[s._v("#defifine")]),s._v("进行定义的相关信息.")])]),s._v(" "),t("li")])]),s._v(" "),t("li",[t("p",[s._v("创建完工程后需要对启动文件进行修改")]),s._v(" "),t("p",[s._v("修改STM32的启动文件"),t("code",[s._v('"startup_stm32f10x.s"')]),s._v(",将文件中的"),t("code",[s._v("PendSV_Handler")]),s._v("修改为"),t("code",[s._v("OS_CPU_PendSVHandler")]),s._v(",")]),s._v(" "),t("p",[t("code",[s._v("SysTick_Handler")]),s._v("修改为"),t("code",[s._v("OS_CPU_SysTickHandler")])]),s._v(" "),t("p",[s._v("还需要注释掉移植过来的"),t("code",[s._v("PendSV_Handler")]),s._v("和"),t("code",[s._v("SysTick_Handler")]),s._v("函数.")])]),s._v(" "),t("li",[t("p",[s._v("添加文件结构中所需文件即可")])])]),s._v(" "),t("h1",{attrs:{id:"任务的创建和切换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务的创建和切换"}},[s._v("#")]),s._v(" 任务的创建和切换")]),s._v(" "),t("h2",{attrs:{id:"创建任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建任务"}},[s._v("#")]),s._v(" 创建任务")]),s._v(" "),t("h3",{attrs:{id:"栈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#栈"}},[s._v("#")]),s._v(" 栈")]),s._v(" "),t("ul",[t("li",[s._v("在裸机中由启动文件在RAM中开启一整个连续空间.")]),s._v(" "),t("li",[s._v("在操作系统中多任务系统中的任务栈是在统一的一个栈空间里分配一个个独立的房间,每个任务只能使用在各自的房间.")]),s._v(" "),t("li",[s._v("在μC/OS中空闲任务的栈最小应该大于等于128.")]),s._v(" "),t("li",[s._v("μC/OS中栈的数据类型为"),t("code",[s._v("CPU_STK")]),s._v("(cpu.h).")]),s._v(" "),t("li")]),s._v(" "),t("h3",{attrs:{id:"定义任务函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义任务函数"}},[s._v("#")]),s._v(" 定义任务函数")]),s._v(" "),t("ul",[t("li",[s._v("任务是一个独立的函数,函数主体无限循环且不能返回.")])]),s._v(" "),t("h3",{attrs:{id:"定义任务控制块tcb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义任务控制块tcb"}},[s._v("#")]),s._v(" 定义任务控制块TCB")]),s._v(" "),t("ul",[t("li",[s._v("系统为了顺利的调度任务,为每个任务都额外定义了一个任务控制块 TCB(Task ControlBlock),这个任务控制块就相当于任务的身份证,里面存有任务的所有信息,比如任务的栈,任务名称,任务的形参等.有了这个任务控制块之后,以后系统对任务的全部操作都可以通过这个 TCB 来实现.")]),s._v(" "),t("li",[s._v("TCB的数据类型为"),t("code",[s._v("OS_TCB")]),s._v("(os.h).")])]),s._v(" "),t("h3",{attrs:{id:"创建任务函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建任务函数"}},[s._v("#")]),s._v(" 创建任务函数")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("任务创建函数 "),t("code",[s._v("OSTaskCreate")]),s._v("将任务的栈,任务的函数实体,任务的 TCB 联系起来,交由系统进行统一调度.")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("OSTaskCreate")]),s._v("(os_task.c).")])]),s._v(" "),t("li",[t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskCreate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_tcb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    CPU_CHAR      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_TASK_PTR    p_task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_PRIO        prio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    CPU_STK       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_stk_base"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    CPU_STK_SIZE   stk_limit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    CPU_STK_SIZE   stk_size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_MSG_QTY     q_size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_TICK        time_quanta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_ext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_OPT         opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    OS_ERR        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ol",[t("li",[s._v("p_tcb是任务控制块指针.")]),s._v(" "),t("li",[s._v("p_task是任务函数名.")]),s._v(" "),t("li",[s._v("p_arg是任务形参,用于传递任务函数.")]),s._v(" "),t("li",[s._v("p_stk_base用于指向任务栈的起始地址.")]),s._v(" "),t("li",[s._v("stk_size表示任务栈的大小.")]),s._v(" "),t("li",[s._v("p_err用于储存错误码.")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("OSTaskStkInit()")]),s._v("任务栈初始化函数(os_cpu_c.c).")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[s._v("CPU_STK  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskStkInit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TASK_PTR    p_task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         CPU_STK       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_stk_base"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         CPU_STK       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_stk_limit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         CPU_STK_SIZE   stk_size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         OS_OPT         opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",[t("li",[s._v("p_task是任务名.")]),s._v(" "),t("li",[s._v("p_arg是任务参数.")]),s._v(" "),t("li",[s._v("p_stk_base表示任务栈的起始地址 .")]),s._v(" "),t("li",[s._v("stk_size表示任务栈的大小.")])])]),s._v(" "),t("li",[t("p",[s._v("任务创建完成后,需要把任务添加到就序列表,以供系统随时调度.")])])]),s._v(" "),t("h3",{attrs:{id:"具体过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#具体过程"}},[s._v("#")]),s._v(" 具体过程")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("使用keil自动生成必须文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://778b-1317013106.cos.ap-nanjing.myqcloud.com/img/202302261112020.png",alt:"环境搭建"}})])]),s._v(" "),t("li",[t("p",[s._v("创建自己的工程文件结构")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://778b-1317013106.cos.ap-nanjing.myqcloud.com/img/202302261112700.png",alt:"文件结构"}})])]),s._v(" "),t("li",[t("p",[s._v("栈")]),s._v(" "),t("p",[s._v("在app_cfg.h文件中宏定义自己的任务栈空间大小")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifndef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("__APP_CFG_H")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("__APP_CFG_H")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//TASK STACK SIZES")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("APP_TASK_START_STK_SIZE")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")])])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("在app.h文件中定义任务栈数组和任务控制块")])]),s._v(" "),t("li",[t("p",[s._v("创建任务函数")]),s._v(" "),t("p",[s._v("在bsp.c文件的"),t("code",[s._v("BSP_Init")]),s._v("函数中添加驱动代码")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bsp.h"')])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*!\n    \\brief      BSP初始化程序\n    \\Note\t    none\t\t\t\n    \\param[in]  none\n    \\retval     none\n*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays_Config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RELAYS1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//驱动代码")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*!\n    \\brief      时钟读取函数\n    \\Note\t    none\t\t\t\n    \\param[in]  none\n    \\retval     时钟频率\n*/")]),s._v("\nCPU_INT32U "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_CPU_ClkFreq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tRCC_ClocksTypeDef Clocks_InitStructure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("RCC_GetClocksFreq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("Clocks_InitStructure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_INT32U"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Clocks_InitStructure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HCLK_Frequency"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("p",[s._v("ps:bsp.c文件中需要存放"),t("code",[s._v("BSP_CPU_ClkFreq")]),s._v("函数.")])]),s._v(" "),t("li",[t("p",[s._v("定义任务栈数组和任务控制块")]),s._v(" "),t("p",[s._v("app.h")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifndef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("__APP_H")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("__APP_H")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"includes.h"')])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" CPU_STK AppTaskStartStk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("APP_TASK_START_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" OS_TCB \tAppTaskStartTCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AppTaskStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("创建任务函数")]),s._v(" "),t("p",[s._v("app.c")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.h"')])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AppTaskStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tCPU_INT32U  cpu_clk_freq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    CPU_INT32U  cnts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    OS_ERR      err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//板级初始化")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("CPU_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//初始化 CPU 组件(时间戳,关中断时间测量和主机名)")]),s._v("\n\n    cpu_clk_freq "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_CPU_ClkFreq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取 CPU 内核时钟频率(SysTick 工作时钟)")]),s._v("\n    cnts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cpu_clk_freq "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_INT32U"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("OSCfg_TickRate_Hz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据用户设定的时钟节拍频率计算 SysTick 定时器的计数值")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OS_CPU_SysTickInit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cnts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//调用 SysTick 初始化函数,设置定时器计数值和启动定时器")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays_State_Config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RELAYS1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("RELAYS_TOGGLE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTimeDly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("OS_OPT_TIME_DLY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("ps:任务函数已在第五步中的app.h文件中声明.还有cpu的初始化需要在任务函数中体现.")])]),s._v(" "),t("li",[t("p",[s._v("任务创建")]),s._v(" "),t("p",[s._v("main.c")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.h"')])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tOS_ERR err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSInit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskCreate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("AppTaskStartTCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Relays_Toggle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\tAppTaskStart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//参数")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//优先级")]),s._v("\n\t\t\t\tAppTaskStartStk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//任务栈起始地址")]),s._v("\n\t\t\t\tAPP_TASK_START_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//剩余栈")]),s._v("\n\t\t\t\tAPP_TASK_START_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//任务栈大小")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//消息队列大小")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\tOS_OPT_TASK_STK_CHK"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("OS_OPT_TASK_STK_CLR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("编译下载")]),s._v(" "),t("p",[s._v("初次编译产生报错一般是和头文件有关,根据报错将头文件添加进includes.h文件即可.")])])]),s._v(" "),t("p",[s._v("至此任务的创建已完成.")]),s._v(" "),t("p",[s._v("推荐任务代码模式:在main()函数中将硬件和RTOS亲统先初始化好,然后创建一个启动任务后就启动调度器,然后在启动任务里面创建各种应用任务,当所有任务都创建成功后,启动任务把自己删除.")]),s._v(" "),t("h2",{attrs:{id:"任务切换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务切换"}},[s._v("#")]),s._v(" 任务切换")]),s._v(" "),t("h3",{attrs:{id:"任务的概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务的概念"}},[s._v("#")]),s._v(" 任务的概念")]),s._v(" "),t("ul",[t("li",[s._v("从系统角度看,任务是竞争系统资源的最小运行单元.")]),s._v(" "),t("li",[s._v("μC/OS是个支持多任务的操作系统.")]),s._v(" "),t("li",[s._v("任务可以运行和阻塞,可以使用内存空间等系统资源,各任务互相独立,不同任务可以共享一个优先级,处于就态的多个相同优先级任务将会以时间片切换的方式共享处理器.")])]),s._v(" "),t("h3",{attrs:{id:"任务调度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务调度"}},[s._v("#")]),s._v(" 任务调度")]),s._v(" "),t("ul",[t("li",[s._v("μC/OS任务调度器是基于优先级的全抢占式调度.")]),s._v(" "),t("li",[s._v("理论上可以支持无数个优先级.")]),s._v(" "),t("li",[t("code",[s._v("OSSched()")])])]),s._v(" "),t("h3",{attrs:{id:"任务状态迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务状态迁移"}},[s._v("#")]),s._v(" 任务状态迁移")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://778b-1317013106.cos.ap-nanjing.myqcloud.com/img/202302261112281.png",alt:"任务状态"}})]),s._v(" "),t("ul",[t("li",[s._v("就绪(OS_TASK_STATE_RDY)")]),s._v(" "),t("li",[s._v("延时(OS_TASK_STATE_DLY)")]),s._v(" "),t("li",[s._v("等待(OS_TASK_STATE_PEND)")]),s._v(" "),t("li",[s._v("运行(OS_TASK_STATE_PEND_TIMEOUT)")]),s._v(" "),t("li",[s._v("挂起(OS_TASK_STATE_SUSPENDED)")]),s._v(" "),t("li",[s._v("延时+挂起(OS_TASK_STATE_DLY_SUSPENDED)")]),s._v(" "),t("li",[s._v("等待+挂起(OS_TASK_STATE_PEND_SUSPENDED)")]),s._v(" "),t("li",[s._v("等待超时+挂起(OS_TASK_STATE_PEND_TIMEOUT_SUSPENDED)")]),s._v(" "),t("li",[s._v("删除(OS_TASK_STATE_DEL)")])]),s._v(" "),t("h3",{attrs:{id:"任务常用函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务常用函数"}},[s._v("#")]),s._v(" 任务常用函数")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("任务挂起函数"),t("code",[s._v("OS_TaskSuspend()")])]),s._v(" "),t("p",[s._v("挂起指定任务.")]),s._v(" "),t("p",[s._v("ps:不可以挂起空闲任务.")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OS_TaskSuspend")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_tcb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                      OS_ERR  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("任务恢复函数"),t("code",[s._v("OS_TaskResume()")])]),s._v(" "),t("p",[s._v("让任务重新进入就绪态.")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskResume")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_tcb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     OS_ERR  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("疑问:OSTaskResume和OS_TaskResume有什么区别.")])]),s._v(" "),t("li",[t("p",[s._v("任务删除函数"),t("code",[s._v("OSTaskDel()")])]),s._v(" "),t("p",[s._v("删除一个任务,如果是删除自身形参为NULL.")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskDel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_tcb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 OS_ERR  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("任务延迟函数")]),s._v(" "),t("p",[s._v("主动放弃CPU的使用权")]),s._v(" "),t("p",[t("code",[s._v("OSTimeDly()")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTimeDly")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TICK   dly"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 OS_OPT    opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 OS_ERR   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("OSTimeDlyHMSM()")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTimeDlyHMSM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_INT16U   hours"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     CPU_INT16U   minutes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     CPU_INT16U   seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     CPU_INT32U   milli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     OS_OPT       opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     OS_ERR      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("调度器上锁解锁函数")]),s._v(" "),t("p",[s._v("可以防止在外设初始化的时候程序发生调度,初始化被打断.")]),s._v(" "),t("p",[t("code",[s._v("OSSchedLock()")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSSchedLock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_ERR  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("OSSchedUnlock()")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSSchedUnlock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_ERR  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"任务调度点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务调度点"}},[s._v("#")]),s._v(" 任务调度点")]),s._v(" "),t("ol",[t("li",[s._v("使用延时函数"),t("code",[s._v("OSTimeDly()")]),s._v("或者"),t("code",[s._v("OSTimeDlyHMSM()")]),s._v(".")]),s._v(" "),t("li",[s._v("创建任务.")]),s._v(" "),t("li",[s._v("删除任务.")]),s._v(" "),t("li",[s._v("任务通过调用"),t("code",[s._v("OSTaskSuspend()")]),s._v("将自身挂起.")]),s._v(" "),t("li",[s._v("任务解挂某个挂起的任务.")]),s._v(" "),t("li",[s._v("用户调用"),t("code",[s._v("OSSched()")]),s._v(".")]),s._v(" "),t("li",[s._v("释放信号量或者发送消息,也可通过配置相应的参数不发生任务调度.")]),s._v(" "),t("li",[s._v("任务等待的事情还没发生(等待信号量,消息队列等).")]),s._v(" "),t("li",[s._v("任务取消等待.")]),s._v(" "),t("li",[s._v("删除一个内核对象.")]),s._v(" "),t("li",[s._v("任务改变自身的优先级或者其他任务的优先级.")]),s._v(" "),t("li",[s._v("退出所有的嵌套中断.")]),s._v(" "),t("li",[s._v("通过"),t("code",[s._v("OSSchedUnlock()")]),s._v("给调度器解锁.")]),s._v(" "),t("li",[s._v("任务调用"),t("code",[s._v("OSSchedRoundRobinYield()")]),s._v("放弃其执行时间片.")])]),s._v(" "),t("h2",{attrs:{id:"任务时间片运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务时间片运行"}},[s._v("#")]),s._v(" 任务时间片运行")]),s._v(" "),t("p",[s._v("ps:开启时间片轮转之后,相同优先级的任务也可以互相调换.")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("修改os_cfg.h文件中宏定义的值.")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("OS_CFG_SCHED_ROUND_ROBIN_EN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1u")])])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在app.c文件中的启动任务中加入"),t("code",[s._v("OSSchedRoundRobinCfg()")]),s._v("函数.")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.h"')])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AppTaskStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tCPU_INT32U  cpu_clk_freq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    CPU_INT32U  cnts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    OS_ERR      err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//板级初始化")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("CPU_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//初始化 CPU 组件(时间戳,关中断时间测量和主机名)")]),s._v("\n\n    cpu_clk_freq "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("BSP_CPU_ClkFreq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取 CPU 内核时钟频率(SysTick 工作时钟)")]),s._v("\n    cnts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cpu_clk_freq "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_INT32U"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("OSCfg_TickRate_Hz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据用户设定的时钟节拍频率计算 SysTick 定时器的计数值")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OS_CPU_SysTickInit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cnts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//调用 SysTick 初始化函数,设置定时器计数值和启动定时器")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//时间片调度函数")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSSchedRoundRobinCfg")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_BOOLEAN   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("DEF_ENABLED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使能时间片轮转调度")]),s._v("\n\t\t                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TICK       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//把 OSCfg_TickRate_Hz / 10 设为默认时间片值")]),s._v("\n\t\t\t\t\t     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_ERR       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskCreate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("AppTaskRelays1TCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_CHAR   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Relays1_Task"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TASK_PTR "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Relays1_Task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("    \t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_PRIO     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS1_PRIO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("AppTaskRelays1Stk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS1_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS1_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_MSG_QTY  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TICK     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  \t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_OPT      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_OPT_TASK_STK_CHK "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" OS_OPT_TASK_STK_CLR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_ERR     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskCreate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TCB     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("AppTaskRelays2TCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_CHAR   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Relays2_Task"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TASK_PTR "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Relays2_Task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("    \t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_PRIO     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS2_PRIO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("AppTaskRelays2Stk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS2_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("APP_TASK_RELAYS2_STK_SIZE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_MSG_QTY  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_TICK     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v("  \t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0u")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_OPT      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_OPT_TASK_STK_CHK "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" OS_OPT_TASK_STK_CLR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OS_ERR     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTaskDel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays1_Task")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tOS_ERR err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays_State")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RELAYS1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("RELAYS_TOGGLE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTimeDly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("OS_OPT_TIME_DLY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays2_Task")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("p_arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tOS_ERR err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Relays_State")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RELAYS2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("RELAYS_TOGGLE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("OSTimeDly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("OS_OPT_TIME_DLY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);